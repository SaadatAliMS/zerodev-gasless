"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.encodeMultiSend = exports.setMultiSendAddress = exports.getMultiSendAddress = void 0;
const ethers_1 = require("ethers");
// The deterministic address using solidity 0.8.15
let MULTISEND_ADDR = '0x8ae01fcf7c655655ff2c6ef907b8b4718ab4e17c';
const getMultiSendAddress = () => {
    return MULTISEND_ADDR;
};
exports.getMultiSendAddress = getMultiSendAddress;
// Used for testing
const setMultiSendAddress = (address) => {
    MULTISEND_ADDR = address;
};
exports.setMultiSendAddress = setMultiSendAddress;
// Adopted from: https://github.com/safe-global/safe-contracts/blob/821d5fbdc2a4e7776d66c9f232b000b81e60bffc/src/utils/multisend.ts
const encodeCall = (call) => {
    const data = ethers_1.utils.arrayify(call.data);
    const encoded = ethers_1.utils.solidityPack(['uint8', 'address', 'uint256', 'uint256', 'bytes'], [call.delegateCall ? 1 : 0, call.to, call.value || 0, data.length, data]);
    return encoded.slice(2);
};
const encodeMultiSend = (calls) => {
    return '0x' + calls.map((call) => encodeCall(call)).join('');
};
exports.encodeMultiSend = encodeMultiSend;
//# sourceMappingURL=multisend.js.map